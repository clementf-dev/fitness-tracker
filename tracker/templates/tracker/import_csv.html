{% extends 'tracker/base.html' %}

{% block title %}Importer CSV - Fitness Tracker{% endblock %}

{% block content %}
<div class="animate-in">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-body">
                    <h2 class="mb-4" style="font-weight: 700; color: #ffffff;">üìÅ Importer des donn√©es CSV</h2>

                    <div class="alert alert-info mb-4"
                        style="background: rgba(79, 172, 254, 0.1); border: 1px solid rgba(79, 172, 254, 0.3); color: #ffffff;">
                        <h6 style="font-weight: 600;">‚ÑπÔ∏è Instructions</h6>
                        <ul class="mb-0">
                            <li>S√©lectionnez le type de donn√©es que vous souhaitez importer</li>
                            <li>Choisissez le fichier CSV correspondant depuis votre Google Drive</li>
                            <li>Les donn√©es seront automatiquement import√©es dans la base de donn√©es</li>
                            <li>Les doublons seront automatiquement √©vit√©s</li>
                        </ul>
                    </div>

                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}

                        <div class="mb-3">
                            <label for="{{ form.csv_type.id_for_label }}" class="form-label">Type de donn√©es CSV</label>
                            {{ form.csv_type }}
                            {% if form.csv_type.errors %}
                            <div class="text-danger">{{ form.csv_type.errors }}</div>
                            {% endif %}
                        </div>

                        <div class="mb-3">
                            <label for="{{ form.csv_file.id_for_label }}" class="form-label">Fichier CSV</label>
                            {{ form.csv_file }}
                            {% if form.csv_file.errors %}
                            <div class="text-danger">{{ form.csv_file.errors }}</div>
                            {% endif %}
                        </div>

                        <button type="submit" class="btn btn-success">Importer</button>
                    </form>

                    <hr class="my-4" style="border-color: rgba(255, 255, 255, 0.1);">

                    <div class="mt-4">
                        <h6 style="font-weight: 600; color: var(--text-secondary);">üìã Format des fichiers CSV attendus
                        </h6>

                        <div class="accordion mt-3" id="csvFormatsAccordion">
                            <!-- Poids -->
                            <div class="accordion-item"
                                style="background: var(--card-bg); border: 1px solid var(--card-border); margin-bottom: 0.5rem; border-radius: 12px;">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#collapseWeight"
                                        style="background: transparent; color: var(--text-primary); border: none;">
                                        <strong>Poids</strong>
                                    </button>
                                </h2>
                                <div id="collapseWeight" class="accordion-collapse collapse"
                                    data-bs-parent="#csvFormatsAccordion">
                                    <div class="accordion-body" style="color: var(--text-secondary);">
                                        <code
                                            style="color: #ffffff;">Date, Heure, Poids, Pourcentage de graisse corporelle, ...</code>
                                        <br>
                                        <small>Exemple: 2026.01.07 11:33:25, 11:33:25, 86.1, 24.18, ...</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Pas -->
                            <div class="accordion-item"
                                style="background: var(--card-bg); border: 1px solid var(--card-border); margin-bottom: 0.5rem; border-radius: 12px;">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#collapseSteps"
                                        style="background: transparent; color: var(--text-primary); border: none;">
                                        <strong>Pas</strong>
                                    </button>
                                </h2>
                                <div id="collapseSteps" class="accordion-collapse collapse"
                                    data-bs-parent="#csvFormatsAccordion">
                                    <div class="accordion-body" style="color: var(--text-secondary);">
                                        <code style="color: #ffffff;">Date, Heure, Pas</code>
                                        <br>
                                        <small>Exemple: 2025.12.01 06:22:32, 06:22:32, 1098</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-4">
                        <a href="{% url 'dashboard' %}" class="btn btn-secondary">‚Üê Retour au dashboard</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}